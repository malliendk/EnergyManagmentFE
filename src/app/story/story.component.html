<div *ngIf="story">
  <div class="container mt-5">
    <div class="card">
      <div class="card-header bg-primary text-white">
        <h3>Story Details</h3>
      </div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-3 text-muted">Naam</div>
          <div class="col-md-9">
            <span *ngIf="!editMode">{{ story.name }}</span>
            <input *ngIf="editMode" type="text" class="form-control" name="name" [(ngModel)]="story.name">
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3 text-muted">Beschrijving</div>
          <div class="col-md-9">
            <span *ngIf="!editMode">{{ story.description }}</span>
            <input *ngIf="editMode" type="text" class="form-control" name="description" [(ngModel)]="story.description">
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3 text-muted">Alle requirements getest</div>
          <div class="col-md-9">
          <span class="badge" [ngClass]="story.isAllRequirementsSuccessfullyTested ? 'badge-success' : 'badge-danger'">
            {{ story.isAllRequirementsSuccessfullyTested ? 'Ja' : 'Nee' }}
          </span>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col">
            <br>
            <h4>Requirements</h4>
            <br>
            <div *ngIf="requirements">
            <table class="table table-striped" id="storyRequirementsTable">
              <thead>
              <th>Naam</th>
              <th>Beschrijving</th>
              <th>Succesvol getest</th>
              </thead>
              <tbody>
              <tr class="clickable" *ngFor="let requirement of requirements" routerLink="/requirements/{{requirement.id}}">
                <td>{{requirement.name}}</td>
                <td>{{requirement.description}}</td>
                <td>
                  <span class="badge" [ngClass]="requirement.isSuccessfullyTested ? 'badge-success' : 'badge-danger'">
                    {{requirement.isSuccessfullyTested ? 'Ja' : 'Nee'}}
                  </span>
                </td>
              </tr>
              </tbody>
            </table>
            </div>
          </div>
          <div class="col">
            <br>
            <h4>Scenarios</h4>
            <br>
            <table class="table table-striped" id="storyScenariosTable">
              <thead>
              <th>Naam</th>
              <th>Beschrijving</th>
              <th>Succesvol getest</th>
              </thead>
              <tbody>
              <tr class="clickable" *ngFor="let scenario of scenarios" routerLink="/scenarios/{{scenario.id}}">
                <td>{{scenario.name}}</td>
                <td>{{scenario.description}}</td>
                <td>
                  <span class="badge" [ngClass]="scenario.isSuccessfullyTested ? 'badge-success' : 'badge-danger'">
                    {{scenario.isSuccessfullyTested ? 'Ja' : 'Nee'}}
                  </span>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="card-footer text-muted">
        <button *ngIf="!editMode" class="btn btn-outline-primary" (click)="toggleEditMode()">Edit</button>
        <button *ngIf="editMode" class="btn btn-outline-primary" (click)="saveChanges(this.story.id)">Opslaan</button>
      </div>
    </div>
  </div>
</div>


